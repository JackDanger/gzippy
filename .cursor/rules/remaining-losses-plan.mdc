---
description: Plan for converting remaining losses to wins — prioritized, actionable
alwaysApply: true
---

# Remaining 15 Losses — Plan (Feb 21 2026)

## Summary: 45W / 15L

## Tier 1: Noise-Level (<3%, likely measurement variance) — 4 losses
- silesia-pigz T1 x86: -1.3% vs igzip
- software-pigz T1 x86: -0.5% vs igzip
- logs-pigz T1 x86: -0.4% vs igzip
- software-gzip T1 x86: -0.3% vs igzip

**Action**: None. These oscillate between WIN and LOSS across runs.

## Tier 2: Small gap, fixable — 1 loss
- arm64 software L1 Tmax: -2.1% vs pigz

**Action**: Add `madvise(Sequential)` to mmap in L1 parallel compress path.
Already implemented in code, awaiting next cloud run to verify.

## Tier 3: ISA-L build issue — 2 losses
- x86 software L1 T1: -56.6% vs igzip (2325 MB/s)
- x86 logs L1 T1: -45.4% vs igzip (1773 MB/s)

gzippy (1009 MB/s) uses isal-rs which vendors ISA-L 2.31.0. The igzip binary
uses our submodule ISA-L 2.31.1 built with NASM assembly (verified by
`Building ASM_NASM` in logs). The 2.3x gap suggests isal-sys's ISA-L was
built WITHOUT NASM on the cloud fleet.

**Action**: Diagnostic added to cloud user-data to check NASM detection in
isal-sys build. If confirmed, fix by either:
1. Ensuring NASM is in PATH during `cargo build` (likely already there)
2. Using our submodule's pre-built ISA-L instead of isal-sys vendored copy
3. Calling ISA-L directly via isal-sys FFI with our own library linkage

## Tier 4: Architecture change needed — 8 losses
All Tmax single-member decompress vs rapidgzip/unpigz (-19% to -37%).

**Action**: Implement rapidgzip-style pipeline architecture:
1. Dedicated block-finder threads using precode validation LUT
2. Marker-based parallel decode
3. Window propagation + marker resolution

Estimated effort: 2-4 weeks. Previous attempts (speculative, two-pass) failed.
